
{% extends "socialnetwork/base.html" %}

{% block page_name %}
<h2>Global Stream</h2>
{% endblock %}

{% block content %}
<!-- New Post Form -->
<form method="POST">
    <label>New Post:</label>
    <input type="text" id="id_post_input_text" name="post_text" placeholder="New Post">
    <button type="submit" id="id_post_button">Submit</button>
    {% csrf_token %}
</form>



<div id="post-list">
    {% for post in posts %}
    <div id="id_post_div_{{ post.id }}" class="post-container">
        <p>
            <a href="{% url 'profile' post.user.id %}" id="id_post_profile_{{ post.id }}">
                {{ post.user.first_name }} {{ post.user.last_name }}
            </a>
            - <span id="id_post_text_{{ post.id }}">{{ post.text }}</span>
            - <span id="id_post_date_time_{{ post.id }}">{{ post.creation_time|date:"n/j/Y g:i A" }}</span>

        </p>
        <div id="comments_{{ post.id }}" class="comments-section">
            {% for comment in post.comments.all %}
            <div id="id_comment_div_{{ comment.id }}" class="comment-container">
                <p>
                    <a href="{% url 'profile' comment.user.id %}" id="id_comment_profile_{{ comment.id }}">
                        {{ comment.user.first_name }} {{ comment.user.last_name }}
                    </a>
                    - <span id="id_comment_text_{{ comment.id }}">{{ comment.text }}</span>
                    - <span id="id_comment_date_time_{{ comment.id }}">{{ comment.creation_time|date:"n/j/Y g:i A" }}</span>
                </p>
            </div>
            {% endfor %}
        </div>
        <form class="comment-form" data-post-id="{{ post.id }}">
            {% csrf_token %}
            <label for="id_comment_input_text_{{ post.id }}">Comment:</label>
            <input type="text" id="id_comment_input_text_{{ post.id }}" name="comment_text"
                placeholder="Add a comment..." required>
            <button type="submit" id="id_comment_button_{{ post.id }}">Submit</button>
        </form>
    </div>
    {% endfor %}
</div>


{% endblock %}